google.maps.Polyline.prototype.simplifyLine=function(t){var n=null;if(this.getPath()&&this.getPath().getLength()){var h=this.getPath().getArray(),i=function(t,n){this.p1=t,this.p2=n,this.distanceToPoint=function(t){var n=(this.p2.lat()-this.p1.lat())/(this.p2.lng()-this.p1.lng()),h=this.p1.lat()-n*this.p1.lng(),i=[];return i.push(Math.abs(t.lat()-n*t.lng()-h)/Math.sqrt(Math.pow(n,2)+1)),i.push(Math.sqrt(Math.pow(t.lng()-this.p1.lng(),2)+Math.pow(t.lat()-this.p1.lat(),2))),i.push(Math.sqrt(Math.pow(t.lng()-this.p2.lng(),2)+Math.pow(t.lat()-this.p2.lat(),2))),i.sort(function(t,n){return t-n})[0]}};if("undefined"==typeof t){var a=google.maps.geometry.spherical.computeLength(this.getPath()),e=a/h.length,s=e/1e3;t=s/100}var l=function(t,n){if(t.length<=2)return[t[0]];for(var h,a=[],e=new i(t[0],t[t.length-1]),s=0,o=0,p=1;p<=t.length-2;p++){var g=e.distanceToPoint(t[p]);g>s&&(s=g,o=p)}return s>=n?(h=t[o],e.distanceToPoint(h,!0),a=a.concat(l(t.slice(0,o+1),n)),a=a.concat(l(t.slice(o,t.length),n))):(h=t[o],e.distanceToPoint(h,!0),a=[t[0]]),a};n=l(h,t),n.push(h[h.length-1])}return n};